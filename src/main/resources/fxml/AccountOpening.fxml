<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>
<BorderPane xmlns="http://javafx.com/javafx/11.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.bankingsystem.controllers.AccountOpeningController">
    <!-- HEADER -->
    <top>
        <VBox alignment="CENTER" spacing="10" style="-fx-padding: 15 30; -fx-background-color: #1c3b2c;-fx-border-color: transparent transparent #22ff00 transparent ; -fx-border-width: 0 0 2 0;">
            <HBox alignment="CENTER_LEFT" spacing="20">
                <ImageView fitHeight="40" fitWidth="40">
                <image>
                    <Image url="@/images/5802818.png" />
                </image>
                </ImageView>
                <Text text="Sediba Financial" style="-fx-fill: #e0e0e0; -fx-font-size: 18; -fx-font-weight: bold;" />
                <Region HBox.hgrow="ALWAYS" />
                <VBox alignment="CENTER_RIGHT" spacing="2">
                    <Text fx:id="progressText" text="Step 1: Personal / Company Information" style="-fx-fill: #aaa; -fx-font-size: 14;" />
                </VBox> <Button text="Back to Dashboard" onAction="#handleBackToDashboard" style="-fx-background-color: rgba(251,251,251,0.1); -fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13; -fx-background-radius: 2;">
            </Button>
                <Button onAction="#handleLogout" text="Logout" contentDisplay="RIGHT" style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" graphicTextGap="8">
                    <graphic>
                        <ImageView fitHeight="16" fitWidth="16">
                            <image>
                                <Image url="@/images/logout_icon.png"/>
                            </image>
                        </ImageView>
                    </graphic>
                </Button>
            </HBox>
        </VBox>
    </top>
    <!-- MAIN CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: rgb(28,124,66); -fx-padding: 25;">
            <VBox fx:id="stepContainer" alignment="TOP_CENTER" spacing="35" style="-fx-background-color: rgb(28,124,66)">
                <!-- STEP TRACKER -->
                <VBox alignment="CENTER" spacing="15" style="-fx-background-color: rgba(42,42,42,0.75); -fx-padding: 25;">
                    <Text text="Account Opening Process" style="-fx-font-size: 20; -fx-font-weight: bold; -fx-fill: #e0e0e0;" />
                    <HBox spacing="12" alignment="CENTER">
                        <Label fx:id="stepLabel1" text="1. Info" style="-fx-padding: 8 18; -fx-background-radius: 10; -fx-background-color: #27ae60; -fx-text-fill: white;"/>
                        <Label fx:id="stepLabel2" text="2. Contact" style="-fx-padding: 8 18; -fx-background-radius: 10; -fx-background-color: #555; -fx-text-fill: #e0e0e0;"/>
                        <Label fx:id="stepLabel3" text="3. Account" style="-fx-padding: 8 18; -fx-background-radius: 10; -fx-background-color: #555; -fx-text-fill: #e0e0e0;"/>
                        <Label fx:id="stepLabel4" text="4. Review" style="-fx-padding: 8 18; -fx-background-radius: 10; -fx-background-color: #555; -fx-text-fill: #e0e0e0;"/>
                    </HBox>
                </VBox>
                <!-- CUSTOMER TYPE PICKER -->
                <VBox spacing="6">
                    <Label text="Customer Type:" style="-fx-font-weight:bold;"/>
                    <ComboBox fx:id="customerTypeComboBox" prefWidth="250">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="Individual"/>
                                <String fx:value="Company"/>
                            </FXCollections>
                        </items>
                    </ComboBox>
                </VBox>

                <!-- STEP 1 — INDIVIDUAL -->
                <VBox fx:id="step1Personal" spacing="10" style="-fx-padding:20; -fx-background-color: rgba(42,42,42,0.75); -fx-background-radius:10;">
                    <Label text="Individual Information" style="-fx-font-size:16; -fx-font-weight:bold; -fx-text-fill: #ffffff;"/>
                    <HBox spacing="15">
                        <VBox spacing="6">
                            <Label text="First Name" style="-fx-text-fill: #ffffff;"/>
                            <TextField fx:id="firstNameField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                        </VBox> <VBox spacing="6">
                        <Label text="Last Name" style="-fx-text-fill: #ffffff;"/>
                        <TextField fx:id="lastNameField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox>
                    </HBox>
                    <HBox spacing="15">
                        <VBox spacing="6">
                            <Label text="Date of Birth" style="-fx-text-fill: #ffffff;"/>
                            <DatePicker fx:id="dateOfBirthPicker" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                        </VBox> <VBox spacing="6"> <Label text="Gender" style="-fx-text-fill: #ffffff;"/>
                        <ComboBox fx:id="genderComboBox" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox>
                    </HBox>
                    <HBox spacing="15">
                        <VBox spacing="6">
                            <Label text="ID Type" style="-fx-text-fill: #ffffff;"/>
                            <ComboBox fx:id="idTypeComboBox" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                        </VBox> <VBox spacing="6">
                        <Label text="ID Number" style="-fx-text-fill: #ffffff;"/>
                        <TextField fx:id="idNumberField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox>
                    </HBox>
                    <VBox spacing="6">
                        <Label text="Nationality" style="-fx-text-fill: #ffffff;"/>
                        <TextField fx:id="nationalityField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox>
                </VBox>
                <!-- STEP 1 — COMPANY -->
                <VBox fx:id="step1Company" visible="false" managed="false" spacing="10" style="-fx-padding:20; -fx-background-color: rgba(42,42,42,0.75); -fx-background-radius:10;">
                    <Label text="Company Information" style="-fx-font-size:16; -fx-font-weight:bold; -fx-text-fill: #ffffff;"/>
                    <VBox spacing="6"> <Label text="Company Name" style="-fx-text-fill: #ffffff;"/>
                        <TextField fx:id="companyNameField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox> <VBox spacing="6"> <Label text="Registration Number" style="-fx-text-fill: #ffffff;"/>
                    <TextField fx:id="companyRegistrationNumberField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                </VBox>
                    <VBox spacing="6"> <Label text="Primary Contact Person" style="-fx-text-fill: #ffffff;"/>
                        <TextField fx:id="primaryContactField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox>
                </VBox>
                <!-- STEP 2 — CONTACT -->
                <VBox fx:id="step2Contact" visible="false" managed="false" spacing="10" style="-fx-padding:20; -fx-background-color: rgba(42,42,42,0.75); -fx-background-radius:10;">
                    <Label text="Contact Information" style="-fx-font-size:16; -fx-font-weight:bold; -fx-text-fill: #ffffff;"/>
                    <HBox spacing="15">
                        <VBox spacing="6">
                            <Label text="Email" style="-fx-text-fill: #ffffff;"/>
                            <TextField fx:id="emailField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                        </VBox>
                        <VBox spacing="6">
                            <Label text="Phone" style="-fx-text-fill: #ffffff;"/>
                            <TextField fx:id="phoneField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                        </VBox>
                    </HBox>
                    <VBox spacing="6">
                        <Label text="Address Line 1" style="-fx-text-fill: #ffffff;"/>
                        <TextField fx:id="addressLine1Field" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox>
                    <VBox spacing="6">
                    <Label text="Address Line 2" style="-fx-text-fill: #ffffff;"/>
                        <TextField fx:id="addressLine2Field" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox>
                    <HBox spacing="15">
                        <VBox spacing="6">
                            <Label text="City" style="-fx-text-fill: #ffffff;"/>
                            <TextField fx:id="cityField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                        </VBox>
                        <VBox spacing="6">
                            <Label text="State" style="-fx-text-fill: #ffffff;"/>
                            <TextField fx:id="stateField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                        </VBox> <VBox spacing="6"> <Label text="Postal Code" style="-fx-text-fill: #ffffff;"/>
                        <TextField fx:id="postalCodeField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                    </VBox>
                    </HBox>
                </VBox>
                <!-- STEP 3 — ACCOUNT -->
                <VBox fx:id="step3Account" visible="false" managed="false" spacing="10" style="-fx-padding:20; -fx-background-color: rgba(42,42,42,0.75); -fx-background-radius:10;">
                    <Label text="Account Details" style="-fx-font-size:16; -fx-font-weight:bold; -fx-text-fill: #ffffff;"/>
                    <VBox spacing="6"> <Label text="Account Type" style="-fx-text-fill: #ffffff;"/>
                        <ComboBox fx:id="accountTypeComboBox" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                        <Label fx:id="selectedAccountTypeLabel" text="Selected: " style="-fx-font-size:12; -fx-text-fill:#27ae60;"/>
                    </VBox> <VBox spacing="6"> <Label text="Initial Deposit Amount" style="-fx-text-fill: #ffffff;"/>
                    <TextField fx:id="initialDepositField" style="-fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6; -fx-background-color: #1f1f1f; -fx-text-fill: #e0e0e0;"/>
                </VBox>
                </VBox>
                <!-- STEP 4 — REVIEW -->
                <VBox fx:id="step4Review" visible="false" managed="false" spacing="10" style="-fx-padding:20; -fx-background-color: rgba(42,42,42,0.75); -fx-background-radius:10;">
                    <Label text="Review Information" style="-fx-font-size:16; -fx-font-weight:bold; -fx-text-fill: #ffffff;"/>
                    <GridPane hgap="15" vgap="12">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="25"/>
                            <ColumnConstraints percentWidth="75"/>
                        </columnConstraints>
                        <Label text="First Name:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-text-fill:#ffffff;"/>
                        <TextField fx:id="reviewFirstName" editable="false" GridPane.rowIndex="0" GridPane.columnIndex="1" style="-fx-background-color: #1f1f1f; -fx-text-fill: #ffffff; -fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6;"/>
                        <Label text="Last Name:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-text-fill:#ffffff;"/>
                        <TextField fx:id="reviewLastName" editable="false" GridPane.rowIndex="1" GridPane.columnIndex="1" style="-fx-background-color: #1f1f1f; -fx-text-fill: #ffffff; -fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6;"/>
                        <Label text="ID / Reg Number:" GridPane.rowIndex="2" GridPane.columnIndex="0" style="-fx-text-fill:#ffffff;"/>
                        <TextField fx:id="reviewIdNumber" editable="false" GridPane.rowIndex="2" GridPane.columnIndex="1" style="-fx-background-color: #1f1f1f; -fx-text-fill: #ffffff; -fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6;"/>
                        <Label text="Email:" GridPane.rowIndex="3" GridPane.columnIndex="0" style="-fx-text-fill:#ffffff;"/>
                        <TextField fx:id="reviewEmail" editable="false" GridPane.rowIndex="3" GridPane.columnIndex="1" style="-fx-background-color: #1f1f1f; -fx-text-fill: #ffffff; -fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6;"/>
                        <Label text="Phone:" GridPane.rowIndex="4" GridPane.columnIndex="0" style="-fx-text-fill:#ffffff;"/>
                        <TextField fx:id="reviewPhone" editable="false" GridPane.rowIndex="4" GridPane.columnIndex="1" style="-fx-background-color: #1f1f1f; -fx-text-fill: #ffffff; -fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6;"/>
                        <Label text="Account Type:" GridPane.rowIndex="5" GridPane.columnIndex="0" style="-fx-text-fill:#ffffff;"/>
                        <TextField fx:id="reviewAccountType" editable="false" GridPane.rowIndex="5" GridPane.columnIndex="1" style="-fx-background-color: #1f1f1f; -fx-text-fill: #ffffff; -fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6;"/>
                        <Label text="Initial Deposit:" GridPane.rowIndex="6" GridPane.columnIndex="0" style="-fx-text-fill:#ffffff;"/>
                        <TextField fx:id="reviewInitialDeposit" editable="false" GridPane.rowIndex="6" GridPane.columnIndex="1" style="-fx-background-color: #1f1f1f; -fx-text-fill: #ffffff; -fx-background-radius: 6; -fx-border-color: #444; -fx-border-radius: 6;"/>
                    </GridPane>
                </VBox>
                <!-- NAVIGATION BUTTONS -->
                <HBox spacing="20" alignment="CENTER_RIGHT">
                    <Button fx:id="backButton" text="Back" prefWidth="120" onAction="#handleBack" style="-fx-background-color: #555; -fx-text-fill: #fff; -fx-background-radius: 4;"/>
                    <Button fx:id="nextButton" text="Next" prefWidth="120" onAction="#handleNext" style="-fx-background-color: #27ae60; -fx-text-fill: #fff; -fx-background-radius: 4;"/>
                    <Button fx:id="submitButton" text="Submit" prefWidth="140" visible="false" onAction="#handleSubmit" style="-fx-background-color:#27ae60; -fx-text-fill:white; -fx-background-radius: 4;"/>
                    <Button text="Cancel" prefWidth="100" onAction="#handleCancel" style="-fx-background-color: #e74c3c; -fx-text-fill:white; -fx-background-radius: 4;"/>
                </HBox>
                <!-- TERMS BUTTONS -->
                <HBox spacing="20" alignment="CENTER_LEFT">
                    <Button text="Terms &amp; Conditions" onAction="#handleViewTerms" style="-fx-background-color: transparent; -fx-text-fill:#e0e0e0; -fx-underline:true;"/>
                    <Button text="Privacy Policy" onAction="#handleViewPrivacy" style="-fx-background-color: transparent; -fx-text-fill:#e0e0e0; -fx-underline:true;"/>
                </HBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>
